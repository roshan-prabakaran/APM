{% extends "base.html" %}

{% block content %}
<div class="diagnosis-container">
    <div class="page-header">
        <button class="back-btn" onclick="navigateTo('/')">
            <i class="fas fa-arrow-left"></i> Back to Home
        </button>
        <div class="badge">AI-Powered Analysis</div>
    </div>

    <div class="diagnosis-card">
        <div class="card-header">
            <h2><i class="fas fa-brain"></i> AI Health Diagnosis</h2>
            <p>Advanced AI analysis of your symptoms and vital signs</p>
        </div>

        <!-- Ready State -->
        <div id="ready-state" class="diagnosis-state active">
            <div class="analysis-area">
                <i class="fas fa-brain analysis-icon"></i>
                <h3>Ready for AI Analysis</h3>
                <p>Our AI will analyze your health data and provide recommendations</p>
            </div>
            <button id="start-analysis" class="analysis-btn">Start AI Diagnosis</button>
        </div>

        <!-- Analyzing State -->
        <div id="analyzing-state" class="diagnosis-state">
            <div class="analysis-area analyzing">
                <i class="fas fa-brain analysis-icon spin"></i>
                <h3>AI Analysis in Progress</h3>
                <p>Processing your health data...</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="analysis-progress"></div>
                </div>
            </div>
        </div>

        <!-- Results State -->
        <div id="results-state" class="diagnosis-state">
            <div class="results-header">
                <h3>Diagnosis Results</h3>
                <div class="confidence-badge" id="confidence-badge">87% Confidence</div>
            </div>

            <div class="condition-card">
                <h4>Likely Condition</h4>
                <div class="condition-name" id="condition-name">Common Cold</div>
            </div>

            <div class="diagnosis-grid">
                <div class="diagnosis-section">
                    <h4>Recommendations</h4>
                    <ul id="recommendations-list">
                        <!-- Recommendations will be populated by JavaScript -->
                    </ul>
                </div>

                <div class="diagnosis-section">
                    <h4>Suggested Medications</h4>
                    <div id="medications-list">
                        <!-- Medications will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="follow-up-card">
                <h4>Follow-up Care</h4>
                <p id="follow-up-text">If symptoms worsen or persist beyond 7 days, consult a healthcare provider</p>
            </div>

            <div class="results-controls">
                <button id="new-analysis" class="secondary-btn">New Analysis</button>
                <button id="get-medications" class="primary-btn">Get Medications</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/diagnosis.js') }}"></script>
{% endblock %}
